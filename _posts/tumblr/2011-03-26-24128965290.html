---
layout: post
title: 理解Form中的enctype和action
---

<p>form的enctype属性为编码方式，常用有两种：application/x-www-form-urlencoded和multipart/form-data，默认为application/x-www-form-urlencoded。</p>

<p>当action为get时候，浏览器用x-www-form-urlencoded的编码方式把form数据转换成一个字串（name1=value1&amp; amp;name2=value2…），然后把这个字串append到url后面，用?分割，加载这个新的url。当action为post时候，浏 览器把form数据封装到http body中，然后发送到server。</p>

<p>如果没有type=file的控件，用默认的application/x-www-form-urlencoded就可以了。但是如果有 type=file的话，就要用到multipart/form-data了。浏览器会把整个表单以控件为单位分割，并为每个部分加上Content- Disposition(form-data或者file),Content-Type(默认为text/plain),name(控件 name)等信息，并加上分割符(boundary)。</p>

<p>如果有以下form，并选择了file1.txt上传</p>

<pre>&lt;form action="http://server.com/cgi/handle" enctype="multipart/form-data" method="post"&gt;

&lt;input name="submit-name" type="text" value="chmod777" /&gt;

What files are you sending?

&lt;input name="files" type="file" /&gt;

&lt;/form&gt;

</pre>

<p>则有如下body:<br/>Content-Type: multipart/form-data; boundary=AaB03x</p>

<p>–AaB03x<br/>Content-Disposition: form-data; name=”submit-name”</p>

<p>chmod777<br/>–AaB03x<br/>Content-Disposition: form-data; name=”files”; filename=”file1.txt”<br/>Content-Type: text/plain</p>

<p>… contents of file1.txt …<br/>–AaB03x–</p>

<p>参考：http://www.w3.org/TR/html401/interact/forms.html#h-17.13.1</p>
